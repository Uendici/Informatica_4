#include <stdio.h>
#include <stdlib.h>
#include <time.h>

// Funzione per la simulazione della pescata gacha
void gacha();

int main() {
    int scelta1;
    do {
        printf(" ---------------------------\n");
        printf("|                           |\n");
        printf("|  1) percentuali di uscita |\n");
        printf("|  2) pesca                 |\n");
        printf("|  3) visualizza i PG       |\n");
        printf("|  4) termina account       |\n");
        printf("|                           |\n");
        printf(" ---------------------------\n");
        scanf("%d", &scelta1);
        
        // Mostra le percentuali di uscita
        if (scelta1 == 1) {
            printf(" -------------------------\n");
            printf("|   r       50%%           |\n");
            printf("|   sr      34.9%%         |\n");
            printf("|   ssr     10%%           |\n");
            printf("|   ur      4.9%%          |\n");
            printf(" -------------------------\n");
        } 
        // Avvia la pescata gacha
        else if (scelta1 == 2) {
            gacha();
        } 
        // Gestione di visualizzazione dei PG (aggiunto come placeholder)
        else if (scelta1 == 3) {
            printf("Visualizzazione dei PG non implementata.\n");
        }
        // Gestione di scelta non valida
        else if (scelta1 != 4) {
            printf("Devi scegliere tra 1, 2, 3 e 4!\n");
        }
    } while (scelta1 != 4);
    
    printf("hai eliminato l'account\n");
    return 0;
}

void gacha() {
    char yn;

    srand(time(NULL));
    printf("Sei sicuro di voler pescare? (y/n)\n");
    scanf(" %c", &yn);

    if (yn == 'y' || yn == 'Y') {
        for (int i = 0; i < 11; i++) {
            int numeri_casuali = (rand() % 1000) + 1;
            
            // Gestione della categoria R
            if (numeri_casuali <= 500) {
                printf("HAI TROVATO UN R: ");
                if (numeri_casuali <= 50) {
                    printf("Valhalla\n");
                } else if (numeri_casuali <= 100) {
                    printf("Vaid\n");
                } else if (numeri_casuali <= 200) {
                    printf("Lione\n");
                } else if (numeri_casuali <= 300) {
                    printf("Aristela\n");
                } else if (numeri_casuali <= 400) {
                    printf("Rem (GS)\n");
                } else {
                    printf("Parlot\n");
                }
            } 
            // Gestione della categoria SR
            else if (numeri_casuali <= 850) {
                printf("HAI TROVATO UN SR: ");
                if (numeri_casuali <= 550) {
                    printf("Feld\n");
                } else if (numeri_casuali <= 600) {
                    printf("Quon\n");
                } else if (numeri_casuali <= 700) {
                    printf("Lian\n");
                } else if (numeri_casuali <= 800) {
                    printf("Louvet\n");
                } else {
                    printf("Kazlaser\n");
                }
            } 
            // Gestione della categoria SSR
            else if (numeri_casuali <= 950) {
                printf("HAI TROVATO UN SSR: ");
                if (numeri_casuali <= 900) {
                    if (numeri_casuali <= 850) {
                        printf("Illya\n");
                    } else {
                        printf("Hart\n");
                    }
                } else {
                    printf("Mizuki the Twelfth\n");
                }
            } 
            // Gestione della categoria UR
            else {
                printf("HAI TROVATO UN UR: ");
                if (numeri_casuali <= 975) {
                    printf("Shirou Emiya\n");
                } else {
                    printf("Emperor Isliid\n");
                }
            }
        }
    } 
    // Gestione della risposta negativa
    else if (yn == 'n' || yn == 'N') {
        printf("Ok\n");
    } 
    // Gestione di scelta non valida
    else {
        printf("Scelta non valida.\n");
    }
}
